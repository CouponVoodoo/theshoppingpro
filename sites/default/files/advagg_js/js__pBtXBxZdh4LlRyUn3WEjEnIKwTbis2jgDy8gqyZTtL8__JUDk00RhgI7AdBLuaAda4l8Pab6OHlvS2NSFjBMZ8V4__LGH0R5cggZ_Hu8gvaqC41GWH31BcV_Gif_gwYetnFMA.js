/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/modules/views/js/ajax_view.js. */
(function($){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(){if(Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews)$.each(Drupal.settings.views.ajaxViews,function(i,settings){Drupal.views.instances[i]=new Drupal.views.ajaxView(settings)})};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector='.view-dom-id-'+settings.view_dom_id;this.$view=$(selector);var ajax_path=Drupal.settings.views.ajax_path;if(ajax_path.constructor.toString().indexOf("Array")!=-1)ajax_path=ajax_path[0];var queryString=window.location.search||'';if(queryString!==''){var queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,'');if(queryString!=='')queryString=((/\?/.test(ajax_path))?'&':'?')+queryString};this.element_settings={url:ajax_path+queryString,submit:settings,setClick:true,event:'click',selector:selector,progress:{type:'throbber'}};this.settings=settings;this.$exposed_form=$('form#views-exposed-form-'+settings.view_name.replace(/_/g,'-')+'-'+settings.view_display_id.replace(/_/g,'-'));this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax,this));this.$view.filter(jQuery.proxy(this.filterNestedViews,this)).once(jQuery.proxy(this.attachPagerAjax,this))};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var button=$('input[type=submit], input[type=image]',this.$exposed_form);button=button[0];this.exposedFormAjax=new Drupal.ajax($(button).attr('id'),button,this.element_settings)};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents('.view').size()};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('ul.pager > li > a, th.views-field a, .attachment .views-summary a').each(jQuery.proxy(this.attachPagerLinkAjax,this))};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link),viewData={},href=$link.attr('href');$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));$.extend(viewData,Drupal.Views.parseViewArgs(href,this.settings.view_base_path));this.element_settings.submit=viewData;this.pagerAjax=new Drupal.ajax(false,$link,this.element_settings)};Drupal.ajax.prototype.commands.viewsScrollTop=function(ajax,response,status){var offset=$(response.selector).offset(),scrollTarget=response.selector;while($(scrollTarget).scrollTop()==0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:(offset.top-10)},500)}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/modules/views/js/ajax_view.js. */
/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */

(function(g){var q={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click", buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},m=!1;g(window).bind("load.jcarousel",function(){m=!0});g.jcarousel=function(a,c){this.options=g.extend({},q,c||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!c||c.rtl===void 0)this.options.rtl=(g(a).attr("dir")||g("html").attr("dir")||"").toLowerCase()=="rtl";this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical? this.options.rtl?"right":"left":"top";for(var b="",d=a.className.split(" "),f=0;f<d.length;f++)if(d[f].indexOf("jcarousel-skin")!=-1){g(a).removeClass(d[f]);b=d[f];break}a.nodeName.toUpperCase()=="UL"||a.nodeName.toUpperCase()=="OL"?(this.list=g(a),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=g(a),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));if(this.clip.size()===0)this.clip= this.list.wrap("<div></div>").parent();if(this.container.size()===0)this.container=this.clip.wrap("<div></div>").parent();b!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+b+'"></div>');this.buttonPrev=g(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null)this.buttonPrev=g(this.options.buttonPrevHTML).appendTo(this.container);this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext= g(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null)this.buttonNext=g(this.options.buttonNextHTML).appendTo(this.container);this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}); !this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var j=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,b=this.list.children("li"),e=this;if(b.size()>0){var h=0,i=this.options.offset;b.each(function(){e.format(this,i++);h+=e.dimension(this,j)});this.list.css(this.wh,h+100+"px");if(!c||c.size===void 0)this.options.size=b.size()}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display", "block");this.funcNext=function(){e.next()};this.funcPrev=function(){e.prev()};this.funcResize=function(){e.resizeTimer&&clearTimeout(e.resizeTimer);e.resizeTimer=setTimeout(function(){e.reload()},100)};this.options.initCallback!==null&&this.options.initCallback(this,"init");!m&&g.browser.safari?(this.buttons(!1,!1),g(window).bind("load.jcarousel",function(){e.setup()})):this.setup()};var f=g.jcarousel;f.fn=f.prototype={jcarousel:"0.2.8"};f.fn.extend=f.extend=g.extend;f.fn.extend({setup:function(){this.prevLast= this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var a=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(a,!1);g(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt, "0px");this.list.css(this.wh,"10px");this.options.initCallback!==null&&this.options.initCallback(this,"reset");this.setup()},reload:function(){this.tail!==null&&this.inTail&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;this.options.reloadCallback!==null&&this.options.reloadCallback(this);if(this.options.visible!==null){var a=this,c=Math.ceil(this.clipping()/this.options.visible),b=0,d=0;this.list.children("li").each(function(f){b+=a.dimension(this, c);f+1<a.first&&(d=b)});this.list.css(this.wh,b+"px");this.list.css(this.lt,-d+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(a){if(a!==void 0)this.options.size=a,this.locked||this.buttons();return this.options.size},has:function(a,c){if(c===void 0||!c)c=a;if(this.options.size!==null&&c>this.options.size)c=this.options.size;for(var b=a;b<=c;b++){var d=this.get(b);if(!d.length||d.hasClass("jcarousel-item-placeholder"))return!1}return!0}, get:function(a){return g(">.jcarousel-item-"+a,this.list)},add:function(a,c){var b=this.get(a),d=0,p=g(c);if(b.length===0)for(var j,e=f.intval(a),b=this.create(a);;){if(j=this.get(--e),e<=0||j.length){e<=0?this.list.prepend(b):j.after(b);break}}else d=this.dimension(b);p.get(0).nodeName.toUpperCase()=="LI"?(b.replaceWith(p),b=p):b.empty().append(c);this.format(b.removeClass(this.className("jcarousel-item-placeholder")),a);p=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible): null;d=this.dimension(b,p)-d;a>0&&a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))-d+"px");this.list.css(this.wh,f.intval(this.list.css(this.wh))+d+"px");return b},remove:function(a){var c=this.get(a);if(c.length&&!(a>=this.first&&a<=this.last)){var b=this.dimension(c);a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+b+"px");c.remove();this.list.css(this.wh,f.intval(this.list.css(this.wh))-b+"px")}},next:function(){this.tail!==null&&!this.inTail?this.scrollTail(!1): this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var c=f.intval(this.list.css(this.lt)), c=!a?c-this.tail:c+this.tail;this.inTail=!a;this.prevFirst=this.first;this.prevLast=this.last;this.animate(c)}},scroll:function(a,c){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(a),c))},pos:function(a,c){var b=f.intval(this.list.css(this.lt));if(this.locked||this.animating)return b;this.options.wrap!="circular"&&(a=a<1?1:this.options.size&&a>this.options.size?this.options.size:a);for(var d=this.first>a,g=this.options.wrap!="circular"&&this.first<=1?1:this.first,j=d?this.get(g): this.get(this.last),e=d?g:g-1,h=null,i=0,k=!1,l=0;d?--e>=a:++e<a;){h=this.get(e);k=!h.length;if(h.length===0&&(h=this.create(e).addClass(this.className("jcarousel-item-placeholder")),j[d?"before":"after"](h),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(e<=0||e>this.options.size)))j=this.get(this.index(e)),j.length&&(h=this.add(e,j.clone(!0)));j=h;l=this.dimension(h);k&&(i+=l);if(this.first!==null&&(this.options.wrap=="circular"||e>=1&&(this.options.size===null||e<= this.options.size)))b=d?b+l:b-l}for(var g=this.clipping(),m=[],o=0,n=0,j=this.get(a-1),e=a;++o;){h=this.get(e);k=!h.length;if(h.length===0){h=this.create(e).addClass(this.className("jcarousel-item-placeholder"));if(j.length===0)this.list.prepend(h);else j[d?"before":"after"](h);if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(e<=0||e>this.options.size))j=this.get(this.index(e)),j.length&&(h=this.add(e,j.clone(!0)))}j=h;l=this.dimension(h);if(l===0)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting..."); this.options.wrap!="circular"&&this.options.size!==null&&e>this.options.size?m.push(h):k&&(i+=l);n+=l;if(n>=g)break;e++}for(h=0;h<m.length;h++)m[h].remove();i>0&&(this.list.css(this.wh,this.dimension(this.list)+i+"px"),d&&(b-=i,this.list.css(this.lt,f.intval(this.list.css(this.lt))-i+"px")));i=a+o-1;if(this.options.wrap!="circular"&&this.options.size&&i>this.options.size)i=this.options.size;if(e>i){o=0;e=i;for(n=0;++o;){h=this.get(e--);if(!h.length)break;n+=this.dimension(h);if(n>=g)break}}e=i-o+ 1;this.options.wrap!="circular"&&e<1&&(e=1);if(this.inTail&&d)b+=this.tail,this.inTail=!1;this.tail=null;if(this.options.wrap!="circular"&&i==this.options.size&&i-o+1>=1&&(d=f.intval(this.get(i).css(!this.options.vertical?"marginRight":"marginBottom")),n-d>g))this.tail=n-g-d;if(c&&a===this.options.size&&this.tail)b-=this.tail,this.inTail=!0;for(;a-- >e;)b+=this.dimension(this.get(a));this.prevFirst=this.first;this.prevLast=this.last;this.first=e;this.last=i;return b},animate:function(a,c){if(!this.locked&& !this.animating){this.animating=!0;var b=this,d=function(){b.animating=!1;a===0&&b.list.css(b.lt,0);!b.autoStopped&&(b.options.wrap=="circular"||b.options.wrap=="both"||b.options.wrap=="last"||b.options.size===null||b.last<b.options.size||b.last==b.options.size&&b.tail!==null&&!b.inTail)&&b.startAuto();b.buttons();b.notify("onAfterAnimation");if(b.options.wrap=="circular"&&b.options.size!==null)for(var c=b.prevFirst;c<=b.prevLast;c++)c!==null&&!(c>=b.first&&c<=b.last)&&(c<1||c>b.options.size)&&b.remove(c)}; this.notify("onBeforeAnimation");if(!this.options.animation||c===!1)this.list.css(this.lt,a+"px"),d();else{var f=!this.options.vertical?this.options.rtl?{right:a}:{left:a}:{top:a},d={duration:this.options.animation,easing:this.options.easing,complete:d};if(g.isFunction(this.options.animationStepCallback))d.step=this.options.animationStepCallback;this.list.animate(f,d)}}},startAuto:function(a){if(a!==void 0)this.options.auto=a;if(this.options.auto===0)return this.stopAuto();if(this.timer===null){this.autoStopped= !1;var c=this;this.timer=window.setTimeout(function(){c.next()},this.options.auto*1E3)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){if(this.timer!==null)window.clearTimeout(this.timer),this.timer=null},buttons:function(a,c){if(a==null&&(a=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&& this.last>=this.options.size))a=this.tail!==null&&!this.inTail;if(c==null&&(c=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1))c=this.tail!==null&&this.inTail;var b=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),a&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext), this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=a&&this.buttonNext.each(function(){b.options.buttonNextCallback(b,this,a)}).data("jcarouselstate",a)):this.options.buttonNextCallback!==null&&this.buttonNextState!=a&&this.options.buttonNextCallback(b,null,a);this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev), c&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[c?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",c?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=c&&this.buttonPrev.each(function(){b.options.buttonPrevCallback(b,this,c)}).data("jcarouselstate",c)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=c&&this.options.buttonPrevCallback(b,null,c);this.buttonNextState= a;this.buttonPrevState=c},notify:function(a){var c=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,c);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,c,this.first),this.callback("itemFirstOutCallback",a,c,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,c,this.last),this.callback("itemLastOutCallback",a,c,this.prevLast));this.callback("itemVisibleInCallback",a,c,this.first,this.last,this.prevFirst, this.prevLast);this.callback("itemVisibleOutCallback",a,c,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(a,c,b,d,f,j,e){if(!(this.options[a]==null||typeof this.options[a]!="object"&&c!="onAfterAnimation")){var h=typeof this.options[a]=="object"?this.options[a][c]:this.options[a];if(g.isFunction(h)){var i=this;if(d===void 0)h(i,b,c);else if(f===void 0)this.get(d).each(function(){h(i,this,d,b,c)});else for(var a=function(a){i.get(a).each(function(){h(i,this,a,b,c)})},k=d;k<=f;k++)k!== null&&!(k>=j&&k<=e)&&a(k)}}},create:function(a){return this.format("<li></li>",a)},format:function(a,c){for(var a=g(a),b=a.get(0).className.split(" "),d=0;d<b.length;d++)b[d].indexOf("jcarousel-")!=-1&&a.removeClass(b[d]);a.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c);return a},className:function(a){return a+" "+a+(!this.options.vertical?"-horizontal":"-vertical")}, dimension:function(a,c){var b=g(a);if(c==null)return!this.options.vertical?b.outerWidth(!0)||f.intval(this.options.itemFallbackDimension):b.outerHeight(!0)||f.intval(this.options.itemFallbackDimension);else{var d=!this.options.vertical?c-f.intval(b.css("marginLeft"))-f.intval(b.css("marginRight")):c-f.intval(b.css("marginTop"))-f.intval(b.css("marginBottom"));g(b).css(this.wh,d+"px");return this.dimension(b)}},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-f.intval(this.clip.css("borderLeftWidth"))- f.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-f.intval(this.clip.css("borderTopWidth"))-f.intval(this.clip.css("borderBottomWidth"))},index:function(a,c){if(c==null)c=this.options.size;return Math.round(((a-1)/c-Math.floor((a-1)/c))*c)+1}});f.extend({defaults:function(a){return g.extend(q,a||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){m=!0}});g.fn.jcarousel=function(a){if(typeof a=="string"){var c=g(this).data("jcarousel"),b=Array.prototype.slice.call(arguments, 1);return c[a].apply(c,b)}else return this.each(function(){var b=g(this).data("jcarousel");b?(a&&g.extend(b.options,a),b.reload()):g(this).data("jcarousel",new f(this,a))})}})(jQuery);
;
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/modules/context/plugins/context_reaction_block.js. */
(function($){Drupal.behaviors.contextReactionBlock={attach:function(context){$('form.context-editor:not(.context-block-processed)').addClass('context-block-processed').each(function(){var id=$(this).attr('id');Drupal.contextBlockEditor=Drupal.contextBlockEditor||{};$(this).bind('init.pageEditor',function(event){Drupal.contextBlockEditor[id]=new DrupalContextBlockEditor($(this))});$(this).bind('start.pageEditor',function(event,context){if(!context)context=$(this).data('defaultContext');Drupal.contextBlockEditor[id].editStart($(this),context)});$(this).bind('end.pageEditor',function(event){Drupal.contextBlockEditor[id].editFinish()})});$('#context-blockform:not(.processed)').each(function(){$(this).addClass('processed');Drupal.contextBlockForm=new DrupalContextBlockForm($(this));Drupal.contextBlockForm.setState()});$('#context-blockform a.remove:not(.processed)').each(function(){$(this).addClass('processed');$(this).click(function(){$(this).parents('tr').eq(0).remove();Drupal.contextBlockForm.setState();return false})});$('div.context-block-browser',context).nextAll('.form-item').hide()}};DrupalContextBlockForm=function(blockForm){this.state={};this.setState=function(){$('table.context-blockform-region',blockForm).each(function(){var region=$(this).attr('id').split('context-blockform-region-')[1],blocks=[];$('tr',$(this)).each(function(){var bid=$(this).attr('id'),weight=$(this).find('select,input').first().val();blocks.push({bid:bid,weight:weight})});Drupal.contextBlockForm.state[region]=blocks});$('form input.context-blockform-state').val(JSON.stringify(this.state));$('table.context-blockform-region tr').each(function(){var bid=$(this).attr('id');$('div.context-blockform-selector input[value='+bid+']').parents('div.form-item').eq(0).hide()});$('div.context-blockform-selector input').each(function(){var bid=$(this).val();if($('table.context-blockform-region tr#'+bid).size()===0)$(this).parents('div.form-item').eq(0).show()})};$('#ctools-export-ui-edit-item-form').submit(function(){Drupal.contextBlockForm.setState()});$.each(Drupal.settings.tableDrag,function(base){var table=$('#'+base+':not(.processed)',blockForm);if(table&&table.is('.context-blockform-region')){table.addClass('processed');table.bind('mouseup',function(event){Drupal.contextBlockForm.setState();return})}});$('td.blocks a',blockForm).each(function(){$(this).click(function(){var region=$(this).attr('href').split('#')[1],base="context-blockform-region-"+region,selected=$("div.context-blockform-selector input:checked");if(selected.size()>0){var weight_warn=false,min_weight_option=-10,max_weight_option=10,max_observed_weight=min_weight_option-1;$('table#'+base+' tr').each(function(){var weight_input_val=$(this).find('select,input').first().val();if(+weight_input_val>+max_observed_weight)max_observed_weight=weight_input_val});selected.each(function(){var block=document.createElement('tr'),text=$(this).parents('div.form-item').eq(0).hide().children('label').text(),select='<div class="form-item form-type-select"><select class="tabledrag-hide form-select">',i;weight_warn=true;var selected_weight=max_weight_option;if(max_weight_option>=(1+ +max_observed_weight)){selected_weight=++max_observed_weight;weight_warn=false};for(i=min_weight_option;i<=max_weight_option;++i){select+='<option';if(i==selected_weight)select+=' selected=selected';select+='>'+i+'</option>'};select+='</select></div>';$(block).attr('id',$(this).attr('value')).addClass('draggable');$(block).html("<td>"+text+"</td><td>"+select+"</td><td><a href='' class='remove'>X</a></td>");Drupal.tableDrag[base].makeDraggable(block);$('table#'+base).append(block);if($.cookie('Drupal.tableDrag.showWeight')==1){$('table#'+base).find('.tabledrag-hide').css('display','');$('table#'+base).find('.tabledrag-handle').css('display','none')}else{$('table#'+base).find('.tabledrag-hide').css('display','none');$('table#'+base).find('.tabledrag-handle').css('display','')};Drupal.attachBehaviors($('table#'+base));Drupal.contextBlockForm.setState();$(this).removeAttr('checked')});if(weight_warn)alert(Drupal.t('Desired block weight exceeds available weight options, please check weights for blocks before saving'))};return false})})};DrupalContextBlockEditor=function(editor){this.editor=editor;this.state={};this.blocks={};this.regions={};return this};DrupalContextBlockEditor.prototype={initBlocks:function(blocks){var self=this;this.blocks=blocks;blocks.each(function(){if($(this).hasClass('context-block-empty'))$(this).removeClass('context-block-hidden');$(this).addClass('draggable');$(this).prepend($('<a class="context-block-handle"></a>'));$(this).prepend($('<a class="context-block-remove"></a>').click(function(){$(this).parent('.block').eq(0).fadeOut('medium',function(){$(this).remove();self.updateBlocks()});return false}))})},initRegions:function(regions){this.regions=regions;var ref=this;$(regions).not('.context-ui-processed').each(function(index,el){$('.context-ui-add-link',el).click(function(e){ref.showBlockBrowser($(this).parent())}).addClass('context-ui-processed')});$('.context-block-browser').hide()},showBlockBrowser:function(region){var toggled=false,activeId=$('.context-editing',this.editor).attr('id').replace('-trigger',''),context=$('#'+activeId)[0];this.browser=$('.context-block-browser',context).addClass('active');if(!this.browser.has('input.filter').size()){var parent=$('.block-browser-sidebar .filter',this.browser),list=$('.blocks',this.browser);new Drupal.Filter(list,false,'.context-block-addable',parent)};this.browser.show().dialog({modal:true,close:function(){$(this).dialog('destroy');$('.category',this).show();$(this).hide().appendTo(context).removeClass('active')},height:(.8*$(window).height()),minHeight:400,minWidth:680,width:680});$('.context-block-browser-categories',this.browser).change(function(e){if($(this).val()==0){$('.category',self.browser).show()}else{$('.category',self.browser).hide();$('.category-'+$(this).val(),self.browser).show()}});if(this.addToRegion)$('.context-block-addable',this.browser).unbind('click.addToRegion');var self=this;this.addToRegion=function(e){var ui={item:$(this).clone(),sender:$(region)};$(this).parents('.context-block-browser.active').dialog('close');$(region).after(ui.item);self.addBlock(e,ui,this.editor,activeId.replace('context-editable-',''))};$('.context-block-addable',this.browser).bind('click.addToRegion',this.addToRegion)},updateBlocks:function(){var browser=$('div.context-block-browser');$('.block, .admin-block').each(function(){var bid=$(this).attr('id').split('block-')[1]});$('.context-block-item',browser).each(function(){var bid=$(this).attr('id').split('context-block-addable-')[1]});$(this.regions).each(function(){if($('.block:has(a.context-block)',this).size()>0){$(this).removeClass('context-block-region-empty')}else $(this).addClass('context-block-region-empty')})},updateRegion:function(event,ui,region,op){switch(op){case'over':$(region).removeClass('context-block-region-empty');break;case'out':if($('.draggable-placeholder',region).size()===1&&$('.block:has(a.context-block)',region).size()==0)$(region).addClass('context-block-region-empty');break}},scriptFix:function(event,ui,editor,context){if($('script',ui.item)){var placeholder=$(Drupal.settings.contextBlockEditor.scriptPlaceholder),label=$('div.handle label',ui.item).text();placeholder.children('strong').html(label);$('script',ui.item).parent().empty().append(placeholder)}},addBlock:function(event,ui,editor,context){var self=this;if(ui.item.is('.context-block-addable')){var bid=ui.item.attr('id').split('context-block-addable-')[1],params=Drupal.settings.contextBlockEditor.params;params.context_block=bid+','+context;if(!Drupal.settings.contextBlockEditor.block_tokens||!Drupal.settings.contextBlockEditor.block_tokens[bid]){alert(Drupal.t('An error occurred trying to retrieve block content. Please contact a site administer.'));return};params.context_token=Drupal.settings.contextBlockEditor.block_tokens[bid];var blockLoading=$('<div class="context-block-item context-block-loading"><span class="icon"></span></div>');ui.item.addClass('context-block-added');ui.item.after(blockLoading);$.getJSON(Drupal.settings.contextBlockEditor.path,params,function(data){if(data.status){var newBlock=$(data.block);if($('script',newBlock))$('script',newBlock).remove();blockLoading.fadeOut(function(){$(this).replaceWith(newBlock);self.initBlocks(newBlock);self.updateBlocks();Drupal.attachBehaviors(newBlock)})}else blockLoading.fadeOut(function(){$(this).remove()})})}else if(ui.item.is(':has(a.context-block)'))self.updateBlocks()},setState:function(){var self=this;$(this.regions).each(function(){var region=$('.context-block-region',this).attr('id').split('context-block-region-')[1],blocks=[];$('a.context-block',$(this)).each(function(){if($(this).attr('class').indexOf('edit-')!=-1){var bid=$(this).attr('id').split('context-block-')[1],context=$(this).attr('class').split('edit-')[1].split(' ')[0];context=context?context:0;var block={bid:bid,context:context};blocks.push(block)}});self.state[region]=blocks});$('input.context-block-editor-state',this.editor).val(JSON.stringify(this.state))},disableTextSelect:function(){if($.browser.safari){$('.block:has(a.context-block):not(:has(input,textarea))').css('WebkitUserSelect','none')}else if($.browser.mozilla){$('.block:has(a.context-block):not(:has(input,textarea))').css('MozUserSelect','none')}else if($.browser.msie){$('.block:has(a.context-block):not(:has(input,textarea))').bind('selectstart.contextBlockEditor',function(){return false})}else $(this).bind('mousedown.contextBlockEditor',function(){return false})},enableTextSelect:function(){if($.browser.safari){$('*').css('WebkitUserSelect','')}else if($.browser.mozilla){$('*').css('MozUserSelect','')}else if($.browser.msie){$('*').unbind('selectstart.contextBlockEditor')}else $(this).unbind('mousedown.contextBlockEditor')},editStart:function(editor,context){var self=this;$(document.body).addClass('context-editing');this.editor.addClass('context-editing');this.disableTextSelect();this.initBlocks($('.block:has(a.context-block.edit-'+context+')'));this.initRegions($('.context-block-region').parent());this.updateBlocks();$('a.context_ui_dialog-stop').hide();$('.editing-context-label').remove();var label=$('#context-editable-trigger-'+context+' .label').text();label=Drupal.t('Now Editing: ')+label;editor.parent().parent().prepend('<div class="editing-context-label">'+label+'</div>');$(this.regions).each(function(){var region=$(this),params={revert:true,dropOnEmpty:true,placeholder:'draggable-placeholder',forcePlaceholderSize:true,items:'> .block:has(a.context-block.editable)',handle:'a.context-block-handle',start:function(event,ui){self.scriptFix(event,ui,editor,context)},stop:function(event,ui){self.addBlock(event,ui,editor,context)},receive:function(event,ui){self.addBlock(event,ui,editor,context)},over:function(event,ui){self.updateRegion(event,ui,region,'over')},out:function(event,ui){self.updateRegion(event,ui,region,'out')},cursorAt:{left:300,top:0}};region.sortable(params)});$(this.regions).each(function(){$(this).sortable('option','connectWith',['.ui-sortable'])});if($.ui.version==='1.6'&&$.browser.safari)$.browser.mozilla=true},editFinish:function(){this.editor.removeClass('context-editing');this.enableTextSelect();$('.editing-context-label').remove();$(this.blocks).each(function(){$('a.context-block-handle, a.context-block-remove',this).remove();if($(this).hasClass('context-block-empty'))$(this).addClass('context-block-hidden');$(this).removeClass('draggable')});$('a.context_ui_dialog-stop').show();this.regions.sortable('destroy');this.setState();if($.ui.version==='1.6'&&$.browser.safari)$.browser.mozilla=false}}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/modules/context/plugins/context_reaction_block.js. */
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/modules/google_analytics/googleanalytics.js. */
(function($){$(document).ready(function(){var isInternal=new RegExp("^(https?):\/\/"+window.location.host,"i");$(document.body).click(function(event){$(event.target).closest("a,area").each(function(){var ga=Drupal.settings.googleanalytics,isInternalSpecial=new RegExp("(\/go\/.*)$","i"),isDownload=new RegExp("\\.("+ga.trackDownloadExtensions+")$","i");if(isInternal.test(this.href)){if($(this).is('.colorbox'));else if(ga.trackDownload&&isDownload.test(this.href)){var extension=isDownload.exec(this.href);_gaq.push(["_trackEvent","Downloads",extension[1].toUpperCase(),this.href.replace(isInternal,'')])}else if(isInternalSpecial.test(this.href))_gaq.push(["_trackPageview",this.href.replace(isInternal,'')])}else if(ga.trackMailto&&$(this).is("a[href^='mailto:'],area[href^='mailto:']")){_gaq.push(["_trackEvent","Mails","Click",this.href.substring(7)])}else if(ga.trackOutbound&&this.href.match(/^\w+:\/\//i))if(ga.trackDomainMode==2&&isCrossDomain($(this).attr('hostname'),ga.trackCrossDomains)){event.preventDefault();_gaq.push(["_link",this.href])}else _gaq.push(["_trackEvent","Outbound links","Click",this.href])})});$(document).bind("cbox_complete",function(){var href=$.colorbox.element().attr("href");if(href)_gaq.push(["_trackPageview",href.replace(isInternal,'')])})})
function isCrossDomain(hostname,crossDomains){if(!crossDomains){return false}else return $.inArray(hostname,crossDomains)>-1?true:false}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/modules/google_analytics/googleanalytics.js. */
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/modules/olark/olark.js. */
Drupal.behaviors.olark=function(){if(typeof Drupal.settings.olark.uid!='undefined')olark.extend(function(api){api.chat.updateVisitorNickname({snippet:Drupal.settings.olark.name,hidesDefault:true});api.chat.updateVisitorStatus({snippet:Drupal.settings.olark.mail+' | '+Drupal.settings.olark.userpage});api.chat.onReady(function(){})});if(Drupal.settings.olark.disable_ios&&Drupal.settings.olark.enabled)olark('api.box.onShow',checkIOS)}
function checkIOS(){var agent=navigator.userAgent.toLowerCase(),isIOS=(agent.match(/iP(hone|ad)/i)!==null);if(isIOS)olark('api.box.hide')};
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/modules/olark/olark.js. */
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/themes/ocarina/js/colorbox.js. */
jQuery(function(){if(jQuery('a.colorbox_form').length>0){var link=jQuery("a.colorbox_form").attr('href');link=link.concat('?colorbox=true');jQuery("a.colorbox_form").attr('href',link);jQuery("a.colorbox_form").colorbox({iframe:true,width:200,height:250,onClosed:function(){location.reload(true)}})}});
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/themes/ocarina/js/colorbox.js. */
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/themes/omega/omega/js/jquery.formalize.js. */
var FORMALIZE=(function($,window,document,undefined){var PLACEHOLDER_SUPPORTED='placeholder'in document.createElement('input'),AUTOFOCUS_SUPPORTED='autofocus'in document.createElement('input'),IE6=!!($.browser.msie&&parseInt($.browser.version,10)===6),IE7=!!($.browser.msie&&parseInt($.browser.version,10)===7);return{go:function(){for(var i in FORMALIZE.init)FORMALIZE.init[i]()},init:{ie6_skin_inputs:function(){if(!IE6||!$('input, select, textarea').length)return;var button_regex=/button|submit|reset/,type_regex=/date|datetime|datetime-local|email|month|number|password|range|search|tel|text|time|url|week/;$('input').each(function(){var el=$(this);if(this.getAttribute('type').match(button_regex)){el.addClass('ie6-button');if(this.disabled)el.addClass('ie6-button-disabled')}else if(this.getAttribute('type').match(type_regex)){el.addClass('ie6-input');if(this.disabled)el.addClass('ie6-input-disabled')}});$('textarea, select').each(function(){if(this.disabled)$(this).addClass('ie6-input-disabled')})},autofocus:function(){if(AUTOFOCUS_SUPPORTED||!$(':input[autofocus]').length)return;$(':input[autofocus]:visible:first').focus()},placeholder:function(){if(PLACEHOLDER_SUPPORTED||!$(':input[placeholder]').length)return;FORMALIZE.misc.add_placeholder();$(':input[placeholder]').each(function(){var el=$(this),text=el.attr('placeholder');el.focus(function(){if(el.val()===text)el.val('').removeClass('placeholder-text')}).blur(function(){FORMALIZE.misc.add_placeholder()});el.closest('form').submit(function(){if(el.val()===text)el.val('').removeClass('placeholder-text')}).bind('reset',function(){setTimeout(FORMALIZE.misc.add_placeholder,50)})})}},misc:{add_placeholder:function(){if(PLACEHOLDER_SUPPORTED||!$(':input[placeholder]').length)return;$(':input[placeholder]').each(function(){var el=$(this),text=el.attr('placeholder');if(!el.val()||el.val()===text)el.val(text).addClass('placeholder-text')})}}}})(jQuery,this,this.document);jQuery(document).ready(function(){FORMALIZE.go()});
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/themes/omega/omega/js/jquery.formalize.js. */
/* Source and licensing information for the line(s) below can be found at http://www.theshoppingpro.com/sites/all/themes/omega/omega/js/omega-mediaqueries.js. */
Drupal.omega=Drupal.omega||{};(function($){var current,previous,setCurrentLayout=function(index){index=parseInt(index);previous=current;current=Drupal.settings.omega.layouts.order.hasOwnProperty(index)?Drupal.settings.omega.layouts.order[index]:'mobile';if(previous!=current){$('body').removeClass('responsive-layout-'+previous).addClass('responsive-layout-'+current);$.event.trigger('responsivelayout',{from:previous,to:current})}};Drupal.omega.getCurrentLayout=function(){return current};Drupal.omega.getPreviousLayout=function(){return previous};Drupal.omega.crappyBrowser=function(){return $.browser.msie&&parseInt($.browser.version,10)<9};Drupal.omega.checkLayout=function(layout){if(Drupal.settings.omega.layouts.queries.hasOwnProperty(layout)&&Drupal.settings.omega.layouts.queries[layout]){var output=Drupal.omega.checkQuery(Drupal.settings.omega.layouts.queries[layout]);if(!output&&layout==Drupal.settings.omega.layouts.primary){var dummy=$('<div id="omega-check-query"></div>').prependTo('body');dummy.append('<style media="all">#omega-check-query { position: relative; z-index: -1; }</style>');dummy.append('<!--[if (lt IE 9)&(!IEMobile)]><style media="all">#omega-check-query { z-index: 100; }</style><![endif]-->');output=parseInt(dummy.css('z-index'))==100;dummy.remove()};return output};return false};Drupal.omega.checkQuery=function(query){var dummy=$('<div id="omega-check-query"></div>').prependTo('body');dummy.append('<style media="all">#omega-check-query { position: relative; z-index: -1; }</style>');dummy.append('<style media="'+query+'">#omega-check-query { z-index: 100; }</style>');var output=parseInt(dummy.css('z-index'))==100;dummy.remove();return output};Drupal.behaviors.omegaMediaQueries={attach:function(context){$('body',context).once('omega-mediaqueries',function(){var primary=$.inArray(Drupal.settings.omega.layouts.primary,Drupal.settings.omega.layouts.order),dummy=$('<div id="omega-media-query-dummy"></div>').prependTo('body');dummy.append('<style media="all">#omega-media-query-dummy { position: relative; z-index: -1; }</style>');dummy.append('<!--[if (lt IE 9)&(!IEMobile)]><style media="all">#omega-media-query-dummy { z-index: '+primary+'; }</style><![endif]-->');for(var i in Drupal.settings.omega.layouts.order)dummy.append('<style media="'+Drupal.settings.omega.layouts.queries[Drupal.settings.omega.layouts.order[i]]+'">#omega-media-query-dummy { z-index: '+i+'; }</style>');$(window).bind('resize.omegamediaqueries',function(){setCurrentLayout(dummy.css('z-index'))}).load(function(){$(this).trigger('resize.omegamediaqueries')})})}}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.theshoppingpro.com/sites/all/themes/omega/omega/js/omega-mediaqueries.js. */
